# 01 ä»®èª¬é§†å‹•: ãƒšãƒ«ã‚½ãƒŠä½œæˆï¼ˆAIPMãƒãƒƒã‚«ã‚½ãƒ³ï¼‰

## æœ€åˆã«è³ªå•ï¼ˆå®Ÿè¡Œå‰ã«å›ç­”ã—ã¦ãã ã•ã„ï¼‰
- èª°ã®ãŸã‚ã®ã‚¢ãƒ—ãƒªï¼ˆä¾‹: TODOã‚¢ãƒ—ãƒªï¼‰ã‚’ä½œã‚Šã¾ã™ã‹ï¼Ÿï¼ˆå¿…é ˆï¼‰
- å¹´é½¢ãƒ»æ€§åˆ¥ãƒ»è·æ¥­ã¯ï¼Ÿï¼ˆå¿…é ˆï¼‰
- ãã®äººã®1æ—¥ã®æµã‚Œã¯ï¼Ÿï¼ˆå¿…é ˆï¼‰
- ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹æ‚©ã¿ã¯ï¼Ÿï¼ˆå¿…é ˆï¼‰
- å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ä¾¡å€¤è¦³ã¯ï¼Ÿï¼ˆä»»æ„ï¼‰

> ãƒ’ãƒ³ãƒˆ: `/aipm_hackathon/persona_candidates_100.md` ã‚’è¦‹ãªãŒã‚‰ç™ºæƒ³ã—ã¦OKï¼

## ç›®çš„
ã‚¢ãƒ—ãƒªã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆä¾‹: TODOã‚¢ãƒ—ãƒªï¼‰ã‚’å…·ä½“åŒ–ã—ã€ã€Œä»®èª¬ã€ã¨ã—ã¦å¾Œã§æ¤œè¨¼ãƒ»ä¿®æ­£ã§ãã‚‹çŠ¶æ…‹ã«è½ã¨ã—è¾¼ã¿ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †
```yaml
- trigger: "(ä»®èª¬é§†å‹•_ãƒšãƒ«ã‚½ãƒŠä½œæˆ|HypothesisPersona)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}", "{{read_files(find_files(patterns=['Flow/**/*.md','Flow/**/*.mdx','**/submit_*/README.md']))}}"]
      instructions: |
        ç›´è¿‘ã‚¹ãƒ¬ãƒƒãƒ‰ã¨åŒã‚¹ãƒ¬ãƒƒãƒ‰ã®æˆæœç‰©ã‹ã‚‰ã€ä»¥ä¸‹ã‚­ãƒ¼ã‚’æ¨å®šï¼ˆãªã‘ã‚Œã°ç©ºï¼‰ã€‚
        keys: persona_who, age_gender, occupation, daily_routine, app_problem, values
        å‡ºåŠ›ã¯JSONã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ1ä»¶ã®ã¿ã€‚
      store_as: "prefill"

    - name: "ingest_sense_outputs"
      action: "analyze"
      data: [
        "{{read_files(find_files(patterns=['**/1_sense/02_é¡§å®¢èª¿æŸ»/sense_customer_research.md']))}}",
        "{{read_files(find_files(patterns=['**/1_sense/05_ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æï¼ˆå€‹åˆ¥ï¼‰/draft_interview_analysis_*.md']))}}",
        "{{read_files(find_files(patterns=['**/1_sense/06_ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ï¼ˆå…¨ä½“ï¼‰/draft_research_summary.md']))}}"
      ]
      instructions: |
        é¡§å®¢èª¿æŸ»ãƒ»ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æãƒ»ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ã‹ã‚‰ã€ãƒšãƒ«ã‚½ãƒŠã®è£œåŠ©å€™è£œå€¤ã‚’æŠ½å‡ºã—ã¦JSONã§è¿”ã—ã¦ãã ã•ã„ã€‚
        keys: persona_who_hint, age_gender_hint, occupation_hint, daily_routine_hint, app_problem_hint, values_hint
      store_as: "sense_hints"
    - name: "show_persona_examples"
      action: "display"
      content: |
        ğŸ’¡ ãƒšãƒ«ã‚½ãƒŠã®ä¾‹ï¼ˆå‚è€ƒï¼‰
        - åƒããƒãƒï¼ˆ35ï¼‰: å®¶äº‹ã¨ä»•äº‹ã®ã‚¿ã‚¹ã‚¯ãŒæ··åœ¨
        - å¤§å­¦ç”Ÿï¼ˆ20ï¼‰: ãƒã‚¤ãƒˆã‚„èª²é¡Œã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ··ä¹±
        - ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ï¼ˆ28ï¼‰: ç· åˆ‡ç®¡ç†ã¨å„ªå…ˆåº¦ãŒè‹¦æ‰‹
        - ã‚·ãƒ‹ã‚¢ï¼ˆ68ï¼‰: å°ã•ã„æ–‡å­—ãŒè¦‹ã¥ã‚‰ã„
        
        ã•ã‚‰ã« â†’ `/aipm_hackathon/persona_candidates_100.md`
    
    - name: "collect_persona_info"
      action: "ask_questions_with_template"
      template: |
        === ãƒšãƒ«ã‚½ãƒŠæƒ…å ±å…¥åŠ›ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ===
        1. èª°ã®ãŸã‚ã®ã‚¢ãƒ—ãƒªï¼ˆä¾‹: TODOã‚¢ãƒ—ãƒªï¼‰ï¼Ÿ
        ï¼ˆå€™è£œ: {{prefill.persona_who}} / Sense: {{sense_hints.persona_who_hint}}ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        2. å¹´é½¢ãƒ»æ€§åˆ¥ãƒ»è·æ¥­ã¯ï¼Ÿ
        ï¼ˆå€™è£œ: {{prefill.age_gender}} / {{prefill.occupation}} / Sense: {{sense_hints.age_gender_hint}} / {{sense_hints.occupation_hint}}ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        3. 1æ—¥ã®æµã‚Œï¼ˆæ™‚ç³»åˆ—ã§3-6é …ç›®ï¼‰
        ï¼ˆå€™è£œ: {{prefill.daily_routine}} / Sense: {{sense_hints.daily_routine_hint}}ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        4. ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹æ‚©ã¿
        ï¼ˆå€™è£œ: {{prefill.app_problem}} / Sense: {{sense_hints.app_problem_hint}}ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        5. å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ä¾¡å€¤è¦³ï¼ˆä»»æ„ï¼‰
        ï¼ˆå€™è£œ: {{prefill.values}} / Sense: {{sense_hints.values_hint}}ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        =====================================
    
    - name: "wait_inputs"
      action: "wait_for_all_answers"
    
    - name: "refine_brief"
      action: "interactive_dialog"
      message: |
        ã„ã„ã§ã™ã­ï¼
        ãƒšãƒ«ã‚½ãƒŠã®æ‚©ã¿ã‚’1è¡Œã§è¦ç´„ã—ã¦ãã ã•ã„ï¼ˆä»®èª¬ã¨ã—ã¦ï¼‰ã€‚
        ä¾‹ï¼‰ã€Œé¸æŠè‚¢ãŒå¤šã™ãã¦ã€æœ€åˆã®ä¸€æ­©ãŒå‡ºãªã„ã€
    
    - name: "confirm_generate"
      action: "confirm"
      message: "åé›†ã—ãŸå†…å®¹ã§å…¨æˆæœç‰©ï¼ˆpersona.md / experience_map.yaml / mermaidï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    
    - name: "generate_persona"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/persona_todo.md"
      content: |
        # ã‚¢ãƒ—ãƒª ãƒšãƒ«ã‚½ãƒŠä»®èª¬ï¼ˆä¾‹: TODOã‚¢ãƒ—ãƒªï¼‰
        
        ## åŸºæœ¬æƒ…å ±
        - åå‰ï¼ˆä»»æ„ï¼‰: {{generated_name}}
        - å¹´é½¢ãƒ»æ€§åˆ¥: {{age_gender}}
        - è·æ¥­: {{occupation}}
        
        ## 1æ—¥ã®æµã‚Œ
        {{daily_routine}}
        
        ## ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹èª²é¡Œï¼ˆä»®èª¬ï¼‰
        - è¦ç´„: {{problem_brief}}
        - å…·ä½“ä¾‹: {{specific_problems}}
        
        ## ä¾¡å€¤è¦³ãƒ»é‡è¦–
        {{values}}
        
        ## æ³¨æ„
        - æœ¬æ–‡æ›¸ã¯ä»®èª¬ã§ã™ã€‚æ¤œè¨¼å‰æã§æ›´æ–°ã—ã¾ã™ã€‚
        - æ€ã„è¾¼ã¿ã®å¯èƒ½æ€§: {{assumptions}}
    
    - name: "export_experience_map_yaml"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/experience_map.yaml"
      content: |
        persona:
          id: P001
          name: {{generated_name}}
          profile:
            age_gender: {{age_gender}}
            occupation: {{occupation}}
          behaviors: {{daily_routine | to_list}}
          values: {{values}}
        experience_map:
          phases:
            - id: PH1
              name: "è²·ã„ç‰©å‰ã®æº–å‚™"
              actions:
                - id: A101
                  label: "ä¾‹: é€£çµ¡å¸³ã‚’æ›¸ã"
                  notes: []
            - id: PH2
              name: "ãƒ¬ã‚¸/ä½œæ¥­ä¸­"
              actions:
                - id: A201
                  label: "ä¾‹: ãã®å ´ã§5åˆ†ã‚¿ã‚¹ã‚¯ã«ç€æ‰‹"
                  notes: []
            - id: PH3
              name: "å®Œäº†å¾Œã®è¦‹ç›´ã—"
              actions:
                - id: A301
                  label: "ä¾‹: ä»Šæ—¥ã®3æ ã‚’ç¢ºèª"
                  notes: []
        numbering_policy:
          - prefix: P=Persona, PH=Phase, A=Action
          - ä»¥å¾Œã®èª²é¡Œ(PR)/è§£æ±ºç­–(SL)/ã‚¹ãƒˆãƒ¼ãƒªãƒ¼(ST)ã¨é€£ç•ªã§ç´ä»˜ã‘ã¾ã™
    
    - name: "export_experience_map_mermaid"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/experience_map_mermaid.md"
      content: |
        ```mermaid
        flowchart LR
          P001[ãƒšãƒ«ã‚½ãƒŠ: {{generated_name}}]
          P001 --> PH1[PH1 è²·ã„ç‰©å‰ã®æº–å‚™]
          P001 --> PH2[PH2 ãƒ¬ã‚¸/ä½œæ¥­ä¸­]
          P001 --> PH3[PH3 å®Œäº†å¾Œã®è¦‹ç›´ã—]
          PH1 --> A101[A101 è¡Œå‹•]
          PH2 --> A201[A201 è¡Œå‹•]
          PH3 --> A301[A301 è¡Œå‹•]
        ```
    
    - name: "notify_completion"
      action: "display"
      content: |
        âœ… ç”Ÿæˆã—ã¾ã—ãŸï¼š
        - 01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/persona_todo.md
        - 01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/experience_map.yaml
        - 01_ãƒšãƒ«ã‚½ãƒŠä½œæˆ/experience_map_mermaid.md
```

## æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰
â†’ `ä»®èª¬é§†å‹•_èª²é¡Œå®šç¾©` ã§èª²é¡Œã‚’æ·±æ˜ã‚Šã—ã¾ã™
