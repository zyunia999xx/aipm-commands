# 05 ä»®èª¬é§†å‹•: UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆAIPMãƒãƒƒã‚«ã‚½ãƒ³ï¼‰

## æœ€åˆã«è³ªå•ï¼ˆå®Ÿè¡Œå‰ã«å›ç­”ã—ã¦ãã ã•ã„ï¼‰
- ç”»é¢æ•°ï¼ˆæœ€å¤§2ç”»é¢æ¨å¥¨ï¼‰ï¼ˆå¿…é ˆï¼‰
- ãƒ¡ã‚¤ãƒ³ç”»é¢ã®è¦ç´ ï¼ˆä¸Šã‹ã‚‰é †ï¼‰ï¼ˆå¿…é ˆï¼‰
- æ“ä½œãƒ•ãƒ­ãƒ¼ï¼ˆ3-5æ‰‹é †ï¼‰ï¼ˆå¿…é ˆï¼‰
- UI/UXã®å·¥å¤«ç‚¹ï¼ˆå¿…é ˆï¼‰
- å‚è€ƒãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆä»»æ„ï¼‰

## ç›®çš„
MVP/Releaseã®ç”»é¢æ§‹æˆã‚’ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«å¯¾å¿œã¥ã‘ã¦è¨­è¨ˆã—ã¾ã™ã€‚ç”»é¢ç•ªå·ã¨STã‚’ç´ã¥ã‘ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ•ãƒ­ãƒ¼ã‚’YAMLã¨Mermaidã§è¡¨ç¾ã—ã€å„ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’Draw.ioã§å‡ºåŠ›ã—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †
```yaml
- trigger: "(ä»®èª¬é§†å‹•_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ |HypothesisUIWireframe)"
  priority: high
  steps:
    - name: "prefill_from_yaml"
      action: "display"
      content: |
        ğŸ” å‚ç…§
        - story_map.yaml / story_map_mermaid.md
        - spec_mvp.yamlï¼ˆä»»æ„ï¼‰
    
    - name: "show_ui_patterns"
      action: "display"
      content: |
        ğŸ¨ UIãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹
        - ãƒŸãƒ‹ãƒãƒ«å‹ï¼ˆ1ã‚¿ã‚¹ã‚¯ã ã‘ï¼‰
        - ãƒªã‚¹ãƒˆå‹ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
        - ã‚«ãƒ¼ãƒ‰å‹ï¼ˆå°ã•ãªã¾ã¨ã¾ã‚Šï¼‰
    
    - name: "collect_ui_info"
      action: "ask_questions_with_template"
      template: |
        === UIè¨­è¨ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå€™è£œã¯ä¸Šã«è¡¨ç¤ºï¼‰ ===
        1. ç”»é¢æ•°ã¨å½¹å‰²ï¼ˆæ—¢å®š: 1ç”»é¢ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        2. ãƒ¡ã‚¤ãƒ³ç”»é¢ã®è¦ç´ ï¼ˆä¸Šã‹ã‚‰é †ã«ï¼‰
        æ—¢å®šå€™è£œ: ã‚¿ãƒ–(æœ/æ˜¼/å¤œ) / ä¸»è¦1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ / å€™è£œ3ä»¶ / 3æ è¡¨ç¤º
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        3. æ“ä½œãƒ•ãƒ­ãƒ¼ï¼ˆ3-5æ‰‹é †ï¼‰
        æ—¢å®šå€™è£œ: è¡¨ç¤ºâ†’ä»Šã‚„ã‚‹â†’ä¸­æ–­3æŠâ†’å®Œäº†â†’3æ æ›´æ–°
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        4. UI/UXã®å·¥å¤«
        æ—¢å®šå€™è£œ: è¦ªæŒ‡ãƒªãƒ¼ãƒ/é™éŸ³/é…å»¶<300ms/VoiceOver
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        
        5. å‚è€ƒãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆä»»æ„ï¼‰
        â†’ ã€ã‚ãªãŸã®å›ç­”ã€‘ï¼š
        =====================================
    
    - name: "wait_inputs"
      action: "wait_for_all_answers"
    
    # è‡ªå‹•ææ¡ˆï¼ˆã‚¹ãƒˆãƒ¼ãƒªãƒ¼é€£å‹•ã®ç”»é¢ç•ªå·å‰²å½“ã¨ãƒ•ãƒ­ãƒ¼ï¼‰
    - name: "auto_propose_screen_map_yaml"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_map_proposed.yaml"
      content: |
        screens:
          - id: SC1
            title: ãƒ¡ã‚¤ãƒ³
            links_stories: [ST1, ST2]
          - id: SC2
            title: è©³ç´°/å®Œäº†
            links_stories: [ST3]
        mapping:
          ST1: SC1
          ST2: SC1
          ST3: SC2
        flows:
          MVP:
            - from: SC1
              action: ä»Šã‚„ã‚‹
              to: SC2
            - from: SC2
              action: å®Œäº†
              to: SC1
          Release1:
            - from: SC1
              action: æ™‚é–“é¸æŠ
              to: SC2
        numbering_policy:
          - prefix: SC=Screen
    
    - name: "auto_propose_screen_flow_mermaid"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_flow_proposed_mermaid.md"
      content: |
        ```mermaid
        flowchart LR
          %% MVP
          SC1[SC1 ãƒ¡ã‚¤ãƒ³] -->|ä»Šã‚„ã‚‹| SC2[SC2 è©³ç´°/å®Œäº†]
          SC2 -->|å®Œäº†| SC1
          
          %% Release1
          SC1 -->|æ™‚é–“é¸æŠ| SC2
        ```
    
    - name: "display_proposal"
      action: "display"
      content: |
        âœï¸ ç”»é¢ç•ªå·ã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®å¯¾å¿œã€ãŠã‚ˆã³MVP/Releaseã”ã¨ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ•ãƒ­ãƒ¼ææ¡ˆã‚’å‡ºåŠ›ã—ã¾ã—ãŸã€‚ä¿®æ­£ç‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç©ºæ¬„ã¯æ¡ç”¨ï¼‰ã€‚
    
    - name: "collect_screen_corrections"
      action: "ask_questions_with_template"
      template: |
        === ä¿®æ­£ãƒ†ãƒ³ãƒ—ãƒ¬ï¼ˆç©ºæ¬„ã¯æ¡ç”¨ï¼‰ ===
        1) ã‚¹ã‚¯ãƒªãƒ¼ãƒ³å®šç¾©ï¼ˆSCxã®è¿½åŠ /åç§°/links_storiesï¼‰
        â†’
        2) STâ†’SCã®å¯¾å¿œï¼ˆä¾‹: ST2: SC2ï¼‰
        â†’
        3) MVPãƒ•ãƒ­ãƒ¼ï¼ˆfrom/action/toã®è¿½åŠ ãƒ»å¤‰æ›´ï¼‰
        â†’
        4) Release1ãƒ•ãƒ­ãƒ¼ï¼ˆfrom/action/toã®è¿½åŠ ãƒ»å¤‰æ›´ï¼‰
        â†’
        =====================================
    
    - name: "confirm_generate"
      action: "confirm"
      message: "ææ¡ˆï¼‹ä¿®æ­£å†…å®¹ã§ç¢ºå®šæˆæœç‰©ï¼ˆscreen_map.yaml / screen_flow.yaml / screen_flow_mermaid.md / design/*.yaml / design/*_wire_aa.md / drawio/*.drawio ãƒ—ãƒ¬ãƒ¼ã‚¹ï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    
    - name: "export_screen_map_yaml"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_map.yaml"
      content: |
        screens:
          {{screens_final_yaml}}
        mapping:
          {{mapping_final_yaml}}
        numbering_policy:
          - prefix: SC=Screen
    
    - name: "export_screen_flow_yaml"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_flow.yaml"
      content: |
        flows:
          MVP:
            {{flow_mvp_final_yaml}}
          Release1:
            {{flow_release1_final_yaml}}
    
    - name: "export_screen_flow_mermaid"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_flow_mermaid.md"
      content: |
        ```mermaid
        flowchart LR
          %% MVP
          SC1[SC1 {{sc1_title | default:"ãƒ¡ã‚¤ãƒ³"}}] -->|ä»Šã‚„ã‚‹| SC2[SC2 {{sc2_title | default:"è©³ç´°/å®Œäº†"}}]
          SC2 -->|å®Œäº†| SC1
          
          %% Release1
          SC1 -->|æ™‚é–“é¸æŠ| SC2
        ```
    
    - name: "export_screen_design_specs_SC1"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC1_design.yaml"
      content: |
        screen: SC1
        title: ãƒ¡ã‚¤ãƒ³
        tokens:
          color_primary: "#3b82f6"
          color_bg: "#f8fafc"
          spacing: 8
          radius: 12
          font_size_title: 20
        layout:
          header: {x: 24, y: 16, w: 512, h: 28, text: "ä»Šæ—¥ã®ä¸€ç•ª"}
          input:  {x: 24, y: 56, w: 360, h: 36, placeholder: "ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›"}
          addBtn: {x: 392, y: 56, w: 96,  h: 36, text: "è¿½åŠ "}
          list:   {x: 24, y: 104, w: 464, h: 320}
          modeBtn:{x: 24, y: 440, w: 160, h: 36, text: "ä»•äº‹ãƒ¢ãƒ¼ãƒ‰"}
        links_stories: [ST1, ST2]
        accessibility:
          focus_order: [input, addBtn, list, modeBtn]
          aria:
            - element: modeBtn
              role: button
              aria-pressed: true|false
    
    - name: "export_screen_design_specs_SC2"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC2_design.yaml"
      content: |
        screen: SC2
        title: è©³ç´°/å®Œäº†
        tokens:
          color_primary: "#3b82f6"
          color_bg: "#ffffff"
          spacing: 8
          radius: 12
          font_size_title: 18
        layout:
          title:   {x: 24, y: 16, w: 512, h: 24, text: "ã‚¿ã‚¹ã‚¯è©³ç´°"}
          detail:  {x: 24, y: 56, w: 464, h: 200}
          doneBtn: {x: 24, y: 264, w: 120, h: 36, text: "å®Œäº†"}
          backBtn: {x: 160, y: 264, w: 120, h: 36, text: "æˆ»ã‚‹"}
        links_stories: [ST3]
        accessibility:
          focus_order: [doneBtn, backBtn]
          aria: []
    
    - name: "export_screen_design_aa_SC1"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC1_wire_aa.md"
      content: |
        ```
        +--------------------------------------------------+
        | ä»Šæ—¥ã®ä¸€ç•ª                                       |
        +------------------------+-----------+------------+
        | [ ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›........ ] | [è¿½åŠ ]    | (ä»•äº‹ãƒ¢ãƒ¼ãƒ‰) |
        +------------------------+-----------+------------+
        | â€¢ å€™è£œã‚¿ã‚¹ã‚¯1                                      |
        | â€¢ å€™è£œã‚¿ã‚¹ã‚¯2                                      |
        | â€¢ å€™è£œã‚¿ã‚¹ã‚¯3                                      |
        +--------------------------------------------------+
        ```
    
    - name: "export_screen_design_aa_SC2"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC2_wire_aa.md"
      content: |
        ```
        +----------------------------------------------+
        | ã‚¿ã‚¹ã‚¯è©³ç´°                                   |
        +----------------------------------------------+
        | [å†…å®¹.....................................]  |
        |                                              |
        | [ å®Œäº† ]    [ æˆ»ã‚‹ ]                         |
        +----------------------------------------------+
        ```
    
    - name: "generate_drawio_placeholder"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /drawio/SCREENS_PLACEHOLDER.txt"
      content: |
        å„ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®Draw.ioãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: SC1.drawio, SC2.drawioï¼‰ã‚’ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¦ãã ã•ã„ã€‚
        åˆ¥ã‚³ãƒãƒ³ãƒ‰ã€Œè¨­è¨ˆ_Drawioã‚¹ã‚¯ãƒªãƒ¼ãƒ³ç”Ÿæˆã€ã§è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚
    
    - name: "generate_wireframe_md"
      action: "create_markdown_file"
      path: "Flow/{{today}}/{{flow_dir}}/05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /ui_wireframe_todo.md"
      content: |
        # ã‚¢ãƒ—ãƒª UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 
        
        ## ç”»é¢ä¸€è¦§ã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å¯¾å¿œï¼ˆscreen_map.yamlï¼‰
        - SC1: ST1, ST2
        - SC2: ST3
        
        ## ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ•ãƒ­ãƒ¼ï¼ˆMVP/Releaseï¼‰
        - MVP/Releaseã®ç”»é¢é·ç§»å›³ã¯ `screen_flow_mermaid.md` ã‚’å‚ç…§ï¼ˆMermaidã‚³ãƒ¼ãƒ‰ãƒ•ã‚§ãƒ³ã‚¹ä»˜ãã§å‡ºåŠ›æ¸ˆã¿ï¼‰
        
        ## Draw.io
        - `drawio/SC1.drawio`, `drawio/SC2.drawio` ã¯åˆ¥ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆå¯
    
    - name: "notify_completion"
      action: "display"
      content: |
        âœ… ç”Ÿæˆã—ã¾ã—ãŸï¼š
        - 05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /screen_map.yaml / screen_flow.yaml / screen_flow_mermaid.md
        - 05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC1_design.yaml / design/SC2_design.yaml
        - 05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /design/SC1_wire_aa.md / design/SC2_wire_aa.md
        - 05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /drawio/ é…ä¸‹ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€
        - 05_UIãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ /ui_wireframe_todo.md
```

## æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰
â†’ `è¨­è¨ˆ_Drawioã‚¹ã‚¯ãƒªãƒ¼ãƒ³ç”Ÿæˆ` ã§ `SC1.drawio`/`SC2.drawio` ã‚’è‡ªå‹•ç”Ÿæˆ
â†’ ãã®å¾Œ `ä»®èª¬é§†å‹•_ã‚¢ãƒ—ãƒªéª¨å­ç”Ÿæˆ` ã§ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
