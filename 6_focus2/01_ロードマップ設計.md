# Strategy: ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¨­è¨ˆï¼ˆã‚¢ã‚¦ãƒˆã‚«ãƒ å¿—å‘ï¼‰

## ç›®çš„
Discovery/Focus/Deliveryã®æˆæœç‰©ï¼ˆå•é¡Œãƒ»è§£æ±ºãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ»UIãƒ»ã‚¿ã‚¹ã‚¯ãƒ»OKR ç­‰ï¼‰ã‚’å†åˆ©ç”¨ã—ã€ã‚¢ã‚¦ãƒˆã‚«ãƒ ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒâ†’ãƒ•ã‚£ãƒ¼ãƒãƒ£â†’ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§æ§‹æˆã™ã‚‹å®Ÿè¡Œå¯èƒ½ãªãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’çŸ­æ™‚é–“ã§ä½œæˆã—ã¾ã™ã€‚ç”»åƒã®ã‚ˆã†ã«ã€å…¥åŠ›ï¼ˆãƒªã‚µãƒ¼ãƒ/OKR/èƒ½åŠ›/ç«¶åˆ/ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰ã‹ã‚‰ã€å‡ºåŠ›ï¼ˆãƒ†ãƒ¼ãƒãƒ»ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ»ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰ã‚’å¾—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †ï¼ˆRules Stepsï¼‰
```yaml
- trigger: "(strategy_ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—|Roadmap Design|ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¨­è¨ˆ)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}","{{read_files(find_files(patterns=['**/sense2_opportunities.yaml','**/strategy_product_metrics.md','**/dev_tasks.yaml','**/backlog/*.yaml']))}}"]
      instructions: |
        ã‚¢ã‚¦ãƒˆã‚«ãƒ ãƒ»ãƒ†ãƒ¼ãƒå€™è£œã€ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒãƒ£å€™è£œã€ä»Šå››åŠæœŸã®å€™è£œãƒã‚±ãƒƒãƒˆã‚’ç°¡æ½”ã«æŠ½å‡ºã—æç¤ºã—ã¦ãã ã•ã„ã€‚
      store_as: "auto_roadmap_seed"
    - name: "prefill_seed"
      action: "display"
      content: |
        ğŸ” è‡ªå‹•æŠ½å‡º
        {{auto_roadmap_seed}}
    - name: "show_inputs"
      action: "display"
      content: |
        ğŸ” èª­ã¿è¾¼ã¿å€™è£œï¼ˆå­˜åœ¨ã™ã‚Œã°å‚ç…§ï¼‰
        - 3_discovery: problem_map.yaml / solution_map.yaml / story_map.yaml
        - 5_discovery(UI): screen_map.yaml / screen_flow.yaml
        - 2_focus: focus_product_definition.md / focus_market_size_estimation.md / focus_okr_*.md / focus_rough_roadmap.md
        - 4_delivery: 07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£/dev_tasks.yaml
        - 5_strategy: strategy_product_metrics.mdï¼ˆè¨ˆæ¸¬ï¼‰

    - name: "collect_context"
      action: "ask_questions_with_template"
      template: |
        === å…¥åŠ›ï¼ˆã‚¤ãƒ³ãƒ—ãƒƒãƒˆï¼‰===
        1) æœŸé–“ï¼ˆä¾‹: 2025-Q4ã€œ2026-Q2ï¼‰
        â†’
        2) ä¼šç¤¾/çµ„ç¹”ã¨ã—ã¦ã®å„ªå…ˆäº‹é …ã‚„OKRï¼ˆè¦ç‚¹ã§ï¼‰
        â†’
        3) ãƒãƒ¼ãƒ ã®å¯¾å¿œåŠ›/ã‚¹ã‚­ãƒ«ãƒ»æŠ€è¡“çš„åˆ¶ç´„ï¼ˆè¦ç‚¹ã§ï¼‰
        â†’
        4) ç«¶åˆã‚¤ãƒ³ã‚µã‚¤ãƒˆï¼ˆã‚ã‚Œã°ï¼‰/ é‡è¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆNSMã‚„KPIï¼‰
        â†’
        ========================

    - name: "collect_outcome_themes"
      action: "ask_questions_with_template"
      template: |
        === ã‚¢ã‚¦ãƒˆã‚«ãƒ ãƒ»ãƒ†ãƒ¼ãƒï¼ˆ3ä»¶ã¾ã§ï¼‰===
        T1: ãƒ†ãƒ¼ãƒå / æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  / æ¸¬å®šæŒ‡æ¨™
        â†’
        T2: ãƒ†ãƒ¼ãƒå / æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  / æ¸¬å®šæŒ‡æ¨™
        â†’
        T3: ãƒ†ãƒ¼ãƒå / æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  / æ¸¬å®šæŒ‡æ¨™
        â†’
        ====================================

    - name: "collect_features"
      action: "ask_questions_with_template"
      template: |
        === ãƒ•ã‚£ãƒ¼ãƒãƒ£å€™è£œï¼ˆãƒ†ãƒ¼ãƒã«ç´ã¥ã‘ã€ST/ä¾å­˜/å·¥æ•°/è‡ªä¿¡åº¦ï¼‰===
        è¨˜æ³•ä¾‹: T1: æ”¯æ‰•ã„æ–¹æ³•ã®é¸æŠè‚¢ã‚’å¢—ã‚„ã™ / feature=PayPayå¯¾å¿œ / links=ST2 / effort=3 / confidence=0.75 / lane=Integration
        â†’
        è¿½åŠ ã§è¤‡æ•°è¡ŒOKï¼ˆæ”¹è¡ŒåŒºåˆ‡ã‚Šï¼‰
        â†’
        =============================================

    - name: "collect_timeline_buckets"
      action: "ask_questions_with_template"
      template: |
        === ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆãƒã‚±ãƒƒãƒˆå‰²å½“ï¼‰===
        ä»Šå››åŠæœŸ: ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ feature åï¼‰
        â†’
        1å››åŠæœŸå¾Œ: 
        â†’
        2å››åŠæœŸå¾Œ: 
        â†’
        3å››åŠæœŸå¾Œä»¥é™: 
        â†’
        ===================================

    - name: "collect_dependencies"
      action: "ask_questions_with_template"
      template: |
        === ä¾å­˜é–¢ä¿‚ï¼ˆä»»æ„ã€‚è¨˜æ³•: featureA -> featureBï¼‰===
        â†’
        ============================

    - name: "wait"
      action: "wait_for_all_answers"

    - name: "confirm"
      action: "confirm"
      message: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆYAML/ãƒœãƒ¼ãƒ‰/ã‚¬ãƒ³ãƒˆ/å¯è¦–åŒ–ï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"

    - name: "write_roadmap_yaml"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/strategy_roadmap.yaml"
      content: |
        roadmap:
          period: {{context.1}}
          org_priorities: {{context.2}}
          team_capability: {{context.3}}
          competitive_and_metrics: {{context.4}}
          themes:
            - id: T1
              name: {{outcome_themes.T1_ãƒ†ãƒ¼ãƒå | default:outcome_themes.1}}
              outcome: {{outcome_themes.T1_æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  | default:""}}
              metric: {{outcome_themes.T1_æ¸¬å®šæŒ‡æ¨™ | default:""}}
            - id: T2
              name: {{outcome_themes.T2_ãƒ†ãƒ¼ãƒå | default:outcome_themes.2}}
              outcome: {{outcome_themes.T2_æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  | default:""}}
              metric: {{outcome_themes.T2_æ¸¬å®šæŒ‡æ¨™ | default:""}}
            - id: T3
              name: {{outcome_themes.T3_ãƒ†ãƒ¼ãƒå | default:outcome_themes.3}}
              outcome: {{outcome_themes.T3_æœŸå¾…ã‚¢ã‚¦ãƒˆã‚«ãƒ  | default:""}}
              metric: {{outcome_themes.T3_æ¸¬å®šæŒ‡æ¨™ | default:""}}
          features:
            {{features_structured_yaml}}
          lanes: [Frontend, Backend, Integration, Marketing]
          buckets:
            now_q: {{timeline_buckets.ä»Šå››åŠæœŸ | to_list}}
            next_q: {{timeline_buckets.1å››åŠæœŸå¾Œ | to_list}}
            next_2q: {{timeline_buckets.2å››åŠæœŸå¾Œ | to_list}}
            later_3q_plus: {{timeline_buckets.3å››åŠæœŸå¾Œä»¥é™ | to_list}}
          dependencies:
            {{dependencies_structured_yaml}}
          numbering_policy:
            - prefix: T=Theme, F=Feature

    - name: "write_roadmap_board"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/strategy_roadmap_board.md"
      content: |
        # ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆãƒœãƒ¼ãƒ‰è¡¨ç¤ºï¼‰
        
        ## ä»Šå››åŠæœŸ
        {{timeline_buckets.ä»Šå››åŠæœŸ}}
        
        ## 1å››åŠæœŸå¾Œ
        {{timeline_buckets.1å››åŠæœŸå¾Œ}}
        
        ## 2å››åŠæœŸå¾Œ
        {{timeline_buckets.2å››åŠæœŸå¾Œ}}
        
        ## 3å››åŠæœŸå¾Œä»¥é™
        {{timeline_buckets.3å››åŠæœŸå¾Œä»¥é™}}
        
        ---
        è£œè¶³: å˜ãªã‚‹æ©Ÿèƒ½é †åºã§ã¯ãªãã€ãƒ†ãƒ¼ãƒï¼ˆã‚¢ã‚¦ãƒˆã‚«ãƒ ï¼‰ã¨æŒ‡æ¨™ã«ç´ã¥ã‘ã¦å®šæœŸçš„ã«å„ªå…ˆé †ä½ã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚

    - name: "write_roadmap_gantt"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/strategy_roadmap_gantt.md"
      content: |
        ```mermaid
        gantt
          dateFormat  YYYY-MM-DD
          title Roadmap (Rough)
          section ä»Šå››åŠæœŸ
          {{gantt_now_q}}
          section 1å››åŠæœŸå¾Œ
          {{gantt_1q}}
          section 2å››åŠæœŸå¾Œ
          {{gantt_2q}}
          section 3å››åŠæœŸå¾Œä»¥é™
          {{gantt_3q_plus}}
        ```

    - name: "write_roadmap_relations"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/strategy_roadmap_relations_mermaid.md"
      content: |
        ```mermaid
        flowchart LR
          %% Theme -> Featureï¼ˆrank/è‡ªä¿¡åº¦/å·¥æ•°ï¼‰
          T1[Theme T1] --> F1[F1]
          T2[Theme T2] --> F2[F2]
          T3[Theme T3] --> F3[F3]
        ```

    - name: "notify"
      action: "notify"
      message: |
        âœ… ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        - {{patterns.flow_date}}/strategy_roadmap.yaml
        - {{patterns.flow_date}}/strategy_roadmap_board.md
        - {{patterns.flow_date}}/strategy_roadmap_gantt.mdï¼ˆMermaidï¼‰
        - {{patterns.flow_date}}/strategy_roadmap_relations_mermaid.md
        æ¬¡ã¯ `4_delivery/07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£` ã«ãƒ†ãƒ¼ãƒ/ãƒ•ã‚£ãƒ¼ãƒãƒ£ã‚’åæ˜ ã—ã¦å®Ÿè£…è¨ˆç”»ã¸é€²ã¿ã¾ã—ã‚‡ã†ã€‚
```

## æ¬¡ã«å®Ÿè¡Œ
- `4_delivery/07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£`ï¼ˆãƒ†ãƒ¼ãƒâ†’ãƒ•ã‚£ãƒ¼ãƒãƒ£â†’STã¸ã®å±•é–‹ï¼‰
- å¿…è¦ã«å¿œã˜ã¦ `01_ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ¡ãƒˆãƒªã‚¯ã‚¹` ã§æ¸¬å®šè¨­è¨ˆã‚’æ›´æ–°
