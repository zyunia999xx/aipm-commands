# : 参照ナレッジ取り込み

## 目的
最新技術・新規ライブラリなど、AIが未学習の情報を開発で参照できるように、要点を整理した「参照ナレッジ」を作成・保存します。

## 実行手順（Rules Steps）
```yaml
- trigger: "(delivery2_ナレッジ取り込み|knowledge_ingest|参照ナレッジ取り込み)"
  priority: high
  steps:
    - name: "collect_knowledge"
      action: "ask_questions"
      questions:
        - key: knowledge_id
          question: "ナレッジID（英数・ハイフン可。例: react-19-actions)"
          required: true
        - key: title
          question: "ナレッジタイトル"
          required: true
        - key: tags
          question: "タグ（カンマ区切り・任意）"
          required: false
        - key: doc_paths
          question: "ローカル参照ファイルパス（カンマ区切り・任意）"
          required: false
        - key: urls
          question: "参考URL（カンマ区切り・任意）"
          required: false
        - key: paste_excerpts
          question: "重要抜粋（コピペ推奨。仕様/API/制約/例外/サンプルなど）"
          required: false
        - key: notes
          question: "補足（ライセンス/互換性/非推奨事項など・任意）"
          required: false
      store_as: kg

    - name: "auto_summary"
      action: "analyze"
      data: ["{{kg.paste_excerpts}}"]
      instructions: |
        以下の抜粋テキストがあれば、実装時に役立つ要点を3-7項目の箇条書きで要約してください。
        - 使うべきAPI/構文
        - よくある落とし穴や制約
        - バージョン互換/マイグレーション注意
        - 最小コード断片（言語タグ無しのインラインで）
      store_as: summary

    - name: "confirm"
      action: "confirm"
      message: "参照ナレッジを保存します。よろしいですか？"

    - name: "create_knowledge_file"
      action: "create_markdown_file"
      path: "Stock/knowledge/{{kg.knowledge_id}}.md"
      content: |
        ---
        knowledge_id: {{kg.knowledge_id}}
        title: {{kg.title}}
        created_at: {{today}}
        tags: {{kg.tags}}
        doc_paths: {{kg.doc_paths}}
        urls: {{kg.urls}}
        ---

        # {{kg.title}}

        ## 要約
        {{summary}}

        ## 重要抜粋
        {{kg.paste_excerpts}}

        ## 補足
        {{kg.notes}}

        ## 参照
        - ローカル: {{kg.doc_paths}}
        - URL: {{kg.urls}}

    - name: "notify"
      action: "notify"
      message: |
        ✅ 保存しました：Stock/knowledge/{{kg.knowledge_id}}.md
        次は `07_ストーリー実装` で「参照ナレッジID」に `{{kg.knowledge_id}}` を指定してください。
```

## 次に実行
- `07_ストーリー実装`（参照ナレッジIDを指定）


