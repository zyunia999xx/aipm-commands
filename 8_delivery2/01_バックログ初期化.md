# : ãƒãƒƒã‚¯ãƒ­ã‚°2åˆæœŸåŒ–ï¼ˆPRD/DesignDocåæ˜ ï¼‰

## ç›®çš„
Discovery2ã®PRDã¨DesignDocã€Sense2ã®å­¦ã³ã‚’å–ã‚Šè¾¼ã¿ã€äºŒæ®µéšç›®ã®ãƒãƒƒã‚¯ãƒ­ã‚°ï¼ˆBacklog2ï¼‰ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚ã‚¨ãƒ”ãƒƒã‚¯/ã‚¹ãƒˆãƒ¼ãƒªãƒ¼/å„ªå…ˆé †ä½/ä¾å­˜ã‚’æ›´æ–°ã—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †ï¼ˆRules Stepsï¼‰
```yaml
- trigger: "(discovery2_ãƒãƒƒã‚¯ãƒ­ã‚°2åˆæœŸåŒ–|backlog2_init)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}","{{read_files(find_files(patterns=['**/discovery2_prd.md','**/discovery2_designdoc.md','**/sense2_research_summary.md','**/strategy_roadmap.yaml','**/focus2_wbs.md','**/backlog/backlog.yaml']))}}"]
      instructions: |
        ã‚¨ãƒ”ãƒƒã‚¯/ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®è¿½åŠ ãƒ»æ›´æ–°å€™è£œã¨å„ªå…ˆåŸºæº–ã®è‰æ¡ˆã‚’æŠ½å‡ºã—ã€displayå‘ã‘ã®ç®‡æ¡æ›¸ãã§æç¤ºã—ã¦ãã ã•ã„ã€‚
      store_as: "auto_backlog2_seed"
    - name: "prefill_backlog2_seed"
      action: "display"
      content: |
        ğŸ” è‡ªå‹•æŠ½å‡º
        {{auto_backlog2_seed}}
    - name: "show_refs"
      action: "display"
      content: |
        ğŸ” å‚ç…§å€™è£œ
        - discovery2_prd.md / discovery2_designdoc.md
        - sense2_research_summary.md / sense2_opportunities.yaml
        - strategy_roadmap.yaml / focus2_wbs.md
        - æ—¢å­˜: backlog/backlog.yamlï¼ˆå·®åˆ†æ›´æ–°ã®å‚è€ƒï¼‰

    - name: "collect_inputs"
      action: "ask_questions_with_template"
      template: |
        === Backlog2 å…¥åŠ› ===
        1) ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå
        â†’
        2) è¿½åŠ /æ›´æ–°ã™ã‚‹ã‚¨ãƒ”ãƒƒã‚¯ï¼ˆè¡Œå˜ä½ã€‚PRD/DesignDocæ ¹æ‹ ã‚‚ã‚ã‚Œã°ä½µè¨˜ï¼‰
        â†’
        3) è¿½åŠ /æ›´æ–°ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼ˆè¡Œå˜ä½ã€‚As/I want/So thatï¼‰
        â†’
        4) å„ªå…ˆé †ä½åŸºæº–ï¼ˆä¾‹ï¼šä¾¡å€¤Ã—å­¦ç¿’Ã—ä¾å­˜ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼‰
        â†’
        =====================

    - name: "confirm"
      action: "confirm"
      message: "Backlog2ï¼ˆbacklog2.yaml/epics2.yamlï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"

    - name: "write_backlog2_yaml"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/backlog/backlog2.yaml"
      content: |
        product: {{inputs.1}}
        priority_policy: {{inputs.4}}
        epics:
          {{epics2_from_inputs_and_prd}}
        stories:
          {{stories2_from_inputs_and_prd}}

    - name: "write_epics2_yaml"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/backlog/epics2.yaml"
      content: |
        epics:
          {{epics2_from_inputs_and_prd}}

    - name: "notify"
      action: "notify"
      message: |
        âœ… å‡ºåŠ›ã—ã¾ã—ãŸï¼š
        - {{patterns.flow_date}}/backlog/backlog2.yaml
        - {{patterns.flow_date}}/backlog/epics2.yaml
        æ¬¡ã¯ `4_delivery/07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£` ã§Backlog2ã‚’åæ˜ ã—ã¦ãã ã•ã„ã€‚
```

## æ¬¡ã«å®Ÿè¡Œ
- `4_delivery/07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£`ï¼ˆBacklog2ã«åŸºã¥ãå®Ÿè£…è¨ˆç”»ï¼‰
