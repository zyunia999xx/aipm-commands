# : æˆæœç‰©ç¢ºèªï¼ˆé–‹ç™ºãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰

## ç›®çš„
Delivery2ã®æˆæœç‰©ï¼ˆã‚³ãƒ¼ãƒ‰/è¨˜äº‹/è¨­è¨ˆ/ãƒ†ã‚¹ãƒˆï¼‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€å“è³ªãƒã‚§ãƒƒã‚¯ã¨ç¢ºå®šåæ˜ ã¾ã§ã®æ®µå–ã‚Šã‚’æ•´ãˆã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †ï¼ˆRules Stepsï¼‰
```yaml
- trigger: "(delivery2_æˆæœç‰©ç¢ºèª|dev_review2)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}","{{read_files(find_files(patterns=['**/delivery2_story_*.md','**/delivery2_implementation_order.md','**/dev_tasks.yaml']))}}"]
      instructions: |
        ç¢ºèªå¯¾è±¡/ä¸»è¦å¤‰æ›´ç‚¹/å“è³ªãƒã‚§ãƒƒã‚¯ã®å€™è£œã‚’æŠ½å‡ºã—ã€displayç”¨ã«1-2è¡Œãšã¤æç¤ºã—ã¦ãã ã•ã„ã€‚
      store_as: "auto_review_seed"
    - name: "prefill_review_seed"
      action: "display"
      content: |
        ğŸ” è‡ªå‹•æŠ½å‡º
        {{auto_review_seed}}
    - name: "collect_review"
      action: "ask_questions"
      questions:
        - key: project_id
          question: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID"
          required: true
        - key: review_target
          question: "ç¢ºèªå¯¾è±¡ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¾ãŸã¯ã‚¹ãƒˆãƒ¼ãƒªãƒ¼IDï¼‰"
          required: true
        - key: output_type
          question: "é–‹ç™ºæˆæœç‰©ã®ç¨®é¡"
          options: ["ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰","è¨˜äº‹/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ","è¨­è¨ˆè³‡æ–™","ãƒ†ã‚¹ãƒˆçµæœ","ãã®ä»–"]
          required: true
        - key: key_changes
          question: "ä¸»è¦ãªå¤‰æ›´ç‚¹/æ©Ÿèƒ½"
          required: true
        - key: verification_results
          question: "å‹•ä½œç¢ºèªçµæœï¼ˆã‚³ãƒ¼ãƒ‰ã®å ´åˆã¯ä»»æ„ï¼‰"
          required: false
        - key: quality_checks
          question: "å“è³ªãƒã‚§ãƒƒã‚¯å†…å®¹"
          required: true
        - key: pending_items
          question: "æœªè§£æ±ºã®å•é¡Œ/TODOé …ç›®ï¼ˆä»»æ„ï¼‰"
          required: false
        - key: final_path
          question: "ç¢ºå®šå…ˆã®ãƒ‘ã‚¹ï¼ˆStockå†…ï¼‰"
          required: true
      store_as: rv

    - name: "confirm"
      action: "confirm"
      message: "é–‹ç™ºæˆæœç‰©ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"

    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/delivery2_development_review.md"
      content: |
        ---
        doc_type: development_review
        project_id: {{rv.project_id}}
        created_at: {{today}}
        version: v1.0
        ---

        # é–‹ç™ºæˆæœç‰©ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š{{rv.project_id}}

        ## 1. ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¦‚è¦
        - å¯¾è±¡: {{rv.review_target}}
        - ç¨®é¡: {{rv.output_type}}
        - ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥: {{today}}

        ## 2. ä¸»è¦ãªå¤‰æ›´ç‚¹/æ©Ÿèƒ½
        {{rv.key_changes}}

        {{#if (eq rv.output_type "ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰")}}
        ## 3. å‹•ä½œç¢ºèªçµæœ
        {{rv.verification_results}}
        {{/if}}

        ## 4. å“è³ªãƒã‚§ãƒƒã‚¯
        {{rv.quality_checks}}

        {{#if rv.pending_items}}
        ## 5. æœªè§£æ±ºã®å•é¡Œ/TODO
        {{rv.pending_items}}
        {{/if}}

        ## 6. ç¢ºå®šæƒ…å ±
        - ç¢ºå®šå…ˆãƒ‘ã‚¹: {{rv.final_path}}
        - ç¢ºå®šæ–¹æ³•: Flow â†’ Stock ã¸ã®ç§»å‹•

        ## 7. ç¢ºå®šæ‰‹é †
        1. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ã®ç¢ºèª
        2. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œãƒ»ç¢ºèª
        3. ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œ
        4. {{rv.final_path}} ã¸ã®åæ˜ ç¢ºèª

        ## 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
        1. æ®‹å­˜ã™ã‚‹å•é¡Œã®å¯¾å¿œè¨ˆç”»
        2. æ¬¡ã®é–‹ç™ºé …ç›®ã¸ã®ç§»è¡Œ

    - name: "notify"
      action: "notify"
      message: |
        âœ… ç”Ÿæˆã—ã¾ã—ãŸï¼š{{patterns.flow_date}}/delivery2_development_review.md
        å¿…è¦ã«å¿œã˜ã¦ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã§Stockã¸åæ˜ ã—ã¦ãã ã•ã„ã€‚
```

## æ¬¡ã«å®Ÿè¡Œ
- `03_ã‚¹ãƒ—ãƒªãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼` â†’ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—/Backlog2èª¿æ•´ã¸
