# : ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…

## ç›®çš„
å€‹åˆ¥ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®å®Ÿè£…è¨ˆç”»ã‚’æ•´å‚™ã—ã€æˆæœç‰©ãƒ»ãƒ†ã‚¹ãƒˆãƒ»æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§æ˜ç¢ºåŒ–ã—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †ï¼ˆRules Stepsï¼‰
```yaml
- trigger: "(delivery2_ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…|story_impl2)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}","{{read_files(find_files(patterns=['**/backlog/backlog2.yaml','**/delivery2_implementation_order.md','**/strategy_roadmap.yaml']))}}"]
      instructions: |
        å®Ÿè£…å¯¾è±¡ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å€™è£œï¼ˆID/ã‚¿ã‚¤ãƒˆãƒ«/å—å…¥æ¡ä»¶/é–¢é€£æƒ…å ±ï¼‰ã‚’æŠ½å‡ºã—ã€1-3ä»¶ã‚’ç®‡æ¡æ›¸ãã§æç¤ºã—ã¦ãã ã•ã„ã€‚
      store_as: "auto_story_seed"
    - name: "prefill_story_seed"
      action: "display"
      content: |
        ğŸ” è‡ªå‹•æŠ½å‡º
        {{auto_story_seed}}
    - name: "collect_story"
      action: "ask_questions"
      questions:
        - key: project_id
          question: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID"
          required: true
        - key: story_id
          question: "å®Ÿè£…ã™ã‚‹ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ID"
          required: true
        - key: story_title
          question: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚¿ã‚¤ãƒˆãƒ«"
          required: true
        - key: story_description
          question: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å†…å®¹"
          required: true
        - key: acceptance_criteria
          question: "å—å…¥æ¡ä»¶"
          required: true
        - key: technologies
          question: "å®Ÿè£…è¨€èª/ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"
          required: true
        - key: related_docs
          question: "é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/ã‚³ãƒ¼ãƒ‰ï¼ˆä»»æ„ï¼‰"
          required: false
        - key: constraints
          question: "æ³¨æ„ç‚¹/åˆ¶ç´„ï¼ˆä»»æ„ï¼‰"
          required: false
      store_as: st

    - name: "confirm"
      action: "confirm"
      message: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…è¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"

    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/delivery2_story_{{st.story_id}}.md"
      content: |
        ---
        doc_type: story_implementation
        project_id: {{st.project_id}}
        story_id: {{st.story_id}}
        created_at: {{today}}
        version: v1.0
        ---

        # {{st.story_id}}: {{st.story_title}} å®Ÿè£…è¨ˆç”»

        ## 1. ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ¦‚è¦
        {{st.story_description}}

        ## 2. å—å…¥æ¡ä»¶
        {{st.acceptance_criteria}}

        ## 3. æŠ€è¡“è¦ç´ 
        - å®Ÿè£…è¨€èª/ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: {{st.technologies}}
        {{#if st.related_docs}}- é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ/ã‚³ãƒ¼ãƒ‰: {{st.related_docs}}{{/if}}
        {{#if st.constraints}}- åˆ¶ç´„äº‹é …: {{st.constraints}}{{/if}}

        ## 4. å®Ÿè£…è¨ˆç”»
        ### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—
        1. ç’°å¢ƒæº–å‚™
        2. ãƒ†ã‚¹ãƒˆè¨ˆç”»
        3. ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…
        4. UI/UXå®Ÿè£…ï¼ˆè©²å½“æ™‚ï¼‰
        5. çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆ

        ### å®Ÿè£…ã‚³ãƒ¼ãƒ‰
        ```
        // ä¸»è¦ãªã‚³ãƒ¼ãƒ‰æ§‹é€ ã‚„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¡ˆ
        ```

        ## 5. å®Ÿè£…çµæœï¼ˆå®Ÿè£…å¾Œã«è¨˜å…¥ï¼‰
        - æˆæœç‰©ã®å ´æ‰€: code/assets ã®ãƒ‘ã‚¹
        - å‹•ä½œç¢ºèªçµæœ: 

        ## 6. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
        1. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
        2. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¤œè¨
        3. æ¬¡ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¸

    - name: "notify"
      action: "notify"
      message: |
        âœ… ç”Ÿæˆã—ã¾ã—ãŸï¼š{{patterns.flow_date}}/delivery2_story_{{st.story_id}}.md
```

## æ¬¡ã«å®Ÿè¡Œ
- `08_è¨˜äº‹åŸ·ç­†`ï¼ˆæ–‡æ›¸ã®å ´åˆï¼‰
- `09_æˆæœç‰©ç¢ºèª`
