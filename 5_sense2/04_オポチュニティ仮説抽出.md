# : ã‚ªãƒãƒãƒ¥ãƒ‹ãƒ†ã‚£ä»®èª¬æŠ½å‡ºï¼ˆæ¤œè¨¼çµæœã‹ã‚‰æ¬¡ã®æ©Ÿä¼šï¼‰

## ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆçµæœã¨Deliveryæˆæœç‰©ã‚’è¸ã¾ãˆã€æ¬¡ã‚µã‚¤ã‚¯ãƒ«ã§å–ã‚Šçµ„ã‚€ã¹ãæ©Ÿä¼šï¼ˆOpportunityï¼‰ä»®èª¬ã‚’æŠ½å‡ºã—ã¾ã™ã€‚æ ¹æ‹ ã¯Sense2ã‚µãƒãƒªãƒ¼/å€‹åˆ¥åˆ†æ/è¨ˆæ¸¬ã‚’å„ªå…ˆã—ã¾ã™ã€‚

## å®Ÿè¡Œæ‰‹é †ï¼ˆRules Stepsï¼‰
```yaml
- trigger: "(sense2_ã‚ªãƒãƒãƒ¥ãƒ‹ãƒ†ã‚£æŠ½å‡º|Opportunity Extraction 2)"
  priority: high
  steps:
    - name: "infer_defaults_from_thread"
      action: "analyze"
      data: ["{{thread_messages}}","{{read_files(find_files(patterns=['**/sense2_research_summary.md','**/sense2_interview_analysis_*.md','**/delivery2_development_review.md']))}}"]
      instructions: |
        é‡è¦ã‚¤ãƒ³ã‚µã‚¤ãƒˆ/é˜»å®³è¦å› /ã‚¯ã‚¤ãƒƒã‚¯ã‚¦ã‚£ãƒ³å€™è£œã‚’æŠ½å‡ºã—ã€æŠ½å‡ºè¨­å®šã®åˆæœŸå€¤ï¼ˆå‚ç…§ã‚½ãƒ¼ã‚¹/é‡è¦–è¦³ç‚¹/å‡ºåŠ›æ•°ï¼‰ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚
      store_as: "auto_ops_seed"
    - name: "prefill_ops_seed"
      action: "display"
      content: |
        ğŸ” è‡ªå‹•æŠ½å‡ºå€™è£œ
        {{auto_ops_seed}}
    - name: "collect_inputs"
      action: "ask_questions_with_template"
      template: |
        === å…¥åŠ›ãƒ†ãƒ³ãƒ—ãƒ¬ ===
        1) å‚ç…§ã‚½ãƒ¼ã‚¹ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã€‚æœªæŒ‡å®šãªã‚‰è‡ªå‹•æ¢ç´¢ï¼‰
        â†’
        2) é‡è¦–è¦³ç‚¹ï¼ˆä¾‹: é›¢è„±è¦å› /æˆåŠŸé˜»å®³/æœŸå¾…æœªé”/ç«¶åˆå·®åˆ¥åŒ–ï¼‰
        â†’
        3) å‡ºåŠ›æ•°ï¼ˆä¾‹: 10ï¼‰
        â†’
        ======================

    - name: "wait"
      action: "wait_for_all_answers"

    - name: "confirm"
      action: "confirm"
      message: "Sense2ã®æ¤œè¨¼çµæœã‹ã‚‰ã‚ªãƒãƒãƒ¥ãƒ‹ãƒ†ã‚£ä»®èª¬ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"

    - name: "extract_ops"
      action: "analyze"
      data: ["{{read_files(inputs.1 | default: find_files(patterns=['**/sense2_interview_analysis_*.md','**/sense2_research_summary.md','**/strategy_product_metrics.md','**/progress_report.md','**/dev_tasks.yaml']))}}"]
      instructions: |
        å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã€ä»¥ä¸‹ã®å½¢å¼ã§æœ€å¤§{{inputs.3 | default:10}}ä»¶ã®æ©Ÿä¼šä»®èª¬ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚
        - id: OP2-001
          title: çŸ­ã„è¡¨é¡Œ
          evidence: [å¼•ç”¨/è¦³æ¸¬/è¨ˆæ¸¬]
          root_cause: æˆåŠŸé˜»å®³ã¨ãªã£ãŸæ ¹å› 
          expected_value: æœŸå¾…ä¾¡å€¤
          quick_change: ç›´è¿‘ã®æ”¹å–„ï¼ˆ1-2æ—¥ã§åæ˜ å¯èƒ½ï¼‰
          experiment: æ¬¡ã‚µã‚¤ã‚¯ãƒ«ã®æ¤œè¨¼æ–¹æ³•ï¼ˆæŒ‡æ¨™ï¼‰
      store_as: "ops"

    - name: "write_ops_yaml"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/sense2_opportunities.yaml"
      content: |
        opportunities:
          {{ops}}

    - name: "write_ops_md"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/sense2_opportunities.md"
      content: |
        # ã‚ªãƒãƒãƒ¥ãƒ‹ãƒ†ã‚£ä»®èª¬ï¼ˆSense2ï¼‰
        {{#each ops}}
        - **{{id}}**: {{title}}
          - æ ¹æ‹ : {{evidence}}
          - æ ¹å› : {{root_cause}}
          - æœŸå¾…ä¾¡å€¤: {{expected_value}}
          - å³æ™‚æ”¹å–„: {{quick_change}}
          - å®Ÿé¨“: {{experiment}}
        {{/each}}

    - name: "notify"
      action: "display"
      content: |
        âœ… Sense2ã®æ©Ÿä¼šä»®èª¬ã‚’å‡ºåŠ›ã—ã¾ã—ãŸï¼š
        - sense2_opportunities.yaml / sense2_opportunities.md
        æ¬¡ã¯ Focus2/Delivery ã«åæ˜ ã—ã¦ã‚µã‚¤ã‚¯ãƒ«2ã‚’å›ã—ã¾ã—ã‚‡ã†ã€‚
```

## æ¬¡ã«å®Ÿè¡Œ
- `6_focus2/01_ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¨­è¨ˆ` â†’ `6_focus2/02_WBSä½œæˆ` â†’ `6_focus2/03_ãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–` â†’ `4_delivery/07_é–‹ç™ºã‚¿ã‚¹ã‚¯åˆ†è§£`
